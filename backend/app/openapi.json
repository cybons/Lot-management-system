{"openapi":"3.1.0","info":{"title":"Lot Management API","description":"材料ロット管理システム - バックエンドAPI","version":"2.0.0"},"paths":{"/api/masters/products":{"get":{"tags":["masters","masters"],"summary":"List Products","description":"Return a paginated list of products.","operationId":"list_products_api_masters_products_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProductResponse"},"title":"Response List Products Api Masters Products Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["masters","masters"],"summary":"Create Product","description":"Create a new product.","operationId":"create_product_api_masters_products_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/masters/products/{product_code}":{"get":{"tags":["masters","masters"],"summary":"Get Product","description":"Fetch a product by its code.","operationId":"get_product_api_masters_products__product_code__get","parameters":[{"name":"product_code","in":"path","required":true,"schema":{"type":"string","title":"Product Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["masters","masters"],"summary":"Update Product","description":"Update an existing product.","operationId":"update_product_api_masters_products__product_code__put","parameters":[{"name":"product_code","in":"path","required":true,"schema":{"type":"string","title":"Product Code"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["masters","masters"],"summary":"Delete Product","description":"Delete a product by its code.","operationId":"delete_product_api_masters_products__product_code__delete","parameters":[{"name":"product_code","in":"path","required":true,"schema":{"type":"string","title":"Product Code"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/masters/customers":{"get":{"tags":["masters","masters"],"summary":"List Customers","description":"Return customers.","operationId":"list_customers_api_masters_customers_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CustomerResponse"},"title":"Response List Customers Api Masters Customers Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["masters","masters"],"summary":"Create Customer","description":"Create a new customer.","operationId":"create_customer_api_masters_customers_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/masters/customers/{customer_code}":{"get":{"tags":["masters","masters"],"summary":"Get Customer","description":"Fetch a customer by code.","operationId":"get_customer_api_masters_customers__customer_code__get","parameters":[{"name":"customer_code","in":"path","required":true,"schema":{"type":"string","title":"Customer Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["masters","masters"],"summary":"Update Customer","description":"Update a customer.","operationId":"update_customer_api_masters_customers__customer_code__put","parameters":[{"name":"customer_code","in":"path","required":true,"schema":{"type":"string","title":"Customer Code"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["masters","masters"],"summary":"Delete Customer","description":"Delete a customer.","operationId":"delete_customer_api_masters_customers__customer_code__delete","parameters":[{"name":"customer_code","in":"path","required":true,"schema":{"type":"string","title":"Customer Code"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/masters/suppliers":{"get":{"tags":["masters","masters"],"summary":"List Suppliers","description":"List suppliers.","operationId":"list_suppliers_api_masters_suppliers_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SupplierResponse"},"title":"Response List Suppliers Api Masters Suppliers Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["masters","masters"],"summary":"Create Supplier","description":"Create supplier.","operationId":"create_supplier_api_masters_suppliers_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/masters/suppliers/{supplier_code}":{"get":{"tags":["masters","masters"],"summary":"Get Supplier","description":"Get supplier by code.","operationId":"get_supplier_api_masters_suppliers__supplier_code__get","parameters":[{"name":"supplier_code","in":"path","required":true,"schema":{"type":"string","title":"Supplier Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["masters","masters"],"summary":"Update Supplier","description":"Update supplier.","operationId":"update_supplier_api_masters_suppliers__supplier_code__put","parameters":[{"name":"supplier_code","in":"path","required":true,"schema":{"type":"string","title":"Supplier Code"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupplierResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["masters","masters"],"summary":"Delete Supplier","description":"Delete supplier.","operationId":"delete_supplier_api_masters_suppliers__supplier_code__delete","parameters":[{"name":"supplier_code","in":"path","required":true,"schema":{"type":"string","title":"Supplier Code"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/masters/warehouses":{"get":{"tags":["masters","masters"],"summary":"List Warehouses","description":"List warehouses.","operationId":"list_warehouses_api_masters_warehouses_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/WarehouseResponse"},"title":"Response List Warehouses Api Masters Warehouses Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["masters","masters"],"summary":"Create Warehouse","description":"Create warehouse.","operationId":"create_warehouse_api_masters_warehouses_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WarehouseCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WarehouseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/masters/warehouses/{warehouse_code}":{"get":{"tags":["masters","masters"],"summary":"Get Warehouse","description":"Get warehouse by code.","operationId":"get_warehouse_api_masters_warehouses__warehouse_code__get","parameters":[{"name":"warehouse_code","in":"path","required":true,"schema":{"type":"string","title":"Warehouse Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WarehouseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["masters","masters"],"summary":"Update Warehouse","description":"Update warehouse.","operationId":"update_warehouse_api_masters_warehouses__warehouse_code__put","parameters":[{"name":"warehouse_code","in":"path","required":true,"schema":{"type":"string","title":"Warehouse Code"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WarehouseUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WarehouseResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["masters","masters"],"summary":"Delete Warehouse","description":"Delete warehouse.","operationId":"delete_warehouse_api_masters_warehouses__warehouse_code__delete","parameters":[{"name":"warehouse_code","in":"path","required":true,"schema":{"type":"string","title":"Warehouse Code"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/masters/bulk-load":{"post":{"tags":["masters","masters"],"summary":"Bulk Load Masters","description":"Create or update masters in bulk.","operationId":"bulk_load_masters_api_masters_bulk_load_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MasterBulkLoadRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MasterBulkLoadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/lots":{"get":{"tags":["lots"],"summary":"List Lots","description":"ロット一覧取得.\n\nArgs:\n    skip: スキップ件数\n    limit: 取得件数\n    product_id: 製品IDでフィルタ（優先）\n    product_code: 製品コードでフィルタ\n    supplier_code: 仕入先コードでフィルタ\n    warehouse_code: 倉庫コードでフィルタ\n    expiry_from: 有効期限開始日\n    expiry_to: 有効期限終了日\n    with_stock: 在庫あり(>0)のみ取得\n    db: データベースセッション","operationId":"list_lots_api_lots_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"product_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Product Id"}},{"name":"product_code","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Code"}},{"name":"supplier_code","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier Code"}},{"name":"warehouse_code","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Warehouse Code"}},{"name":"expiry_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Expiry From"}},{"name":"expiry_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Expiry To"}},{"name":"with_stock","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"With Stock"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LotResponse"},"title":"Response List Lots Api Lots Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["lots"],"summary":"Create Lot","description":"ロット新規登録.\n\n- ロットマスタ登録\n- 現在在庫テーブル初期化","operationId":"create_lot_api_lots_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LotCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LotResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/lots/{lot_id}":{"get":{"tags":["lots"],"summary":"Get Lot","description":"ロット詳細取得.","operationId":"get_lot_api_lots__lot_id__get","parameters":[{"name":"lot_id","in":"path","required":true,"schema":{"type":"integer","title":"Lot Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LotResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["lots"],"summary":"Update Lot","description":"ロット更新.","operationId":"update_lot_api_lots__lot_id__put","parameters":[{"name":"lot_id","in":"path","required":true,"schema":{"type":"integer","title":"Lot Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LotUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LotResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["lots"],"summary":"Delete Lot","description":"ロット削除.","operationId":"delete_lot_api_lots__lot_id__delete","parameters":[{"name":"lot_id","in":"path","required":true,"schema":{"type":"integer","title":"Lot Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/lots/{lot_id}/movements":{"get":{"tags":["lots"],"summary":"List Lot Movements","description":"ロットの在庫変動履歴取得.","operationId":"list_lot_movements_api_lots__lot_id__movements_get","parameters":[{"name":"lot_id","in":"path","required":true,"schema":{"type":"integer","title":"Lot Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StockMovementResponse"},"title":"Response List Lot Movements Api Lots  Lot Id  Movements Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/lots/movements":{"post":{"tags":["lots"],"summary":"Create Stock Movement","description":"在庫変動記録.\n\n- 在庫変動履歴追加\n- 現在在庫更新","operationId":"create_stock_movement_api_lots_movements_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockMovementCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockMovementResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/orders":{"get":{"tags":["orders"],"summary":"List Orders","description":"受注一覧取得（読み取り専用）.\n\nトランザクション不要のため、通常のSessionを使用\n\nNote:\n    例外はグローバルハンドラで処理されるため、\n    ここではHTTPExceptionを投げない","operationId":"list_orders_api_orders_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"customer_code","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Code"}},{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date From"}},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date To"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderWithLinesResponse"},"title":"Response List Orders Api Orders Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["orders"],"summary":"Create Order","description":"受注作成.\n\n【修正#5】UnitOfWorkを依存注入で取得（SessionLocal直参照を回避）\n\nトランザクション管理:\n    - 成功時: UnitOfWorkが自動commit\n    - 例外発生時: UnitOfWorkが自動rollback\n\n例外処理:\n    - DuplicateOrderError → 409 Conflict\n    - OrderValidationError → 422 Unprocessable Entity\n    - ProductNotFoundError → 404 Not Found\n    - OrderDomainError → 400 Bad Request\n    上記はすべてグローバルハンドラで変換される","operationId":"create_order_api_orders_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderWithLinesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/orders/{order_id}":{"get":{"tags":["orders"],"summary":"Get Order","description":"受注詳細取得（読み取り専用、明細含む）.\n\nトランザクション不要のため、通常のSessionを使用\n\nNote:\n    - OrderNotFoundError → 404はグローバルハンドラが処理","operationId":"get_order_api_orders__order_id__get","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","title":"Order Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderWithLinesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/orders/{order_id}/status":{"patch":{"tags":["orders"],"summary":"Update Order Status","description":"受注ステータス更新.\n\n【修正#2】dict入力を廃止し、OrderStatusUpdateスキーマを使用\n【修正#5】UnitOfWorkを依存注入で取得\n\nArgs:\n    order_id: 受注ID\n    body: ステータス更新データ（Schema検証済み）\n    uow: UnitOfWork（依存注入）\n\nトランザクション管理:\n    - 成功時: UnitOfWorkが自動commit\n    - 例外発生時: UnitOfWorkが自動rollback\n\n例外処理:\n    - OrderNotFoundError → 404 Not Found\n    - InvalidOrderStatusError → 400 Bad Request\n    上記はグローバルハンドラで変換される","operationId":"update_order_status_api_orders__order_id__status_patch","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","title":"Order Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderStatusUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/orders/{order_id}/cancel":{"delete":{"tags":["orders"],"summary":"Cancel Order","description":"受注キャンセル.\n\n【修正#5】UnitOfWorkを依存注入で取得\n\nトランザクション管理:\n    - 成功時: UnitOfWorkが自動commit\n    - 例外発生時: UnitOfWorkが自動rollback\n\n例外処理:\n    - OrderNotFoundError → 404 Not Found\n    - InvalidOrderStatusError → 400 Bad Request\n    上記はグローバルハンドラで変換される\n\nReturns:\n    None (204 No Content)","operationId":"cancel_order_api_orders__order_id__cancel_delete","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","title":"Order Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/allocations/drag-assign":{"post":{"tags":["allocations"],"summary":"Drag Assign Allocation","description":"互換エンドポイント: ドラッグ引当\n※元々 orders.py に存在したものを再実装（URL・I/O変更なし）.","operationId":"drag_assign_allocation_api_allocations_drag_assign_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DragAssignRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/allocations/{allocation_id}":{"delete":{"tags":["allocations"],"summary":"Delete Allocation","description":"引当取消（DELETE API, ソフトキャンセル対応）.","operationId":"delete_allocation_api_allocations__allocation_id__delete","parameters":[{"name":"allocation_id","in":"path","required":true,"schema":{"type":"integer","title":"Allocation Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/allocations/preview":{"post":{"tags":["allocations"],"summary":"Preview Allocations","description":"在庫を変更しない FEFO 引当プレビュー.","operationId":"preview_allocations_api_allocations_preview_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FefoPreviewRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FefoPreviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/allocations/orders/{order_id}/allocate":{"post":{"tags":["allocations"],"summary":"Allocate Order","description":"注文ID単位でのFEFO引当確定.","operationId":"allocate_order_api_allocations_orders__order_id__allocate_post","parameters":[{"name":"order_id","in":"path","required":true,"schema":{"type":"integer","title":"Order Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FefoCommitResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/allocations/candidate-lots":{"get":{"tags":["allocations"],"summary":"Get Candidate Lots","description":"候補ロット一覧取得（product_id基準）.\n\nArgs:\n    product_id: 製品ID（必須）\n    warehouse_id: 倉庫ID（任意フィルタ）\n    limit: 最大取得件数（デフォルト200）\n    db: データベースセッション\n\nReturns:\n    CandidateLotsResponse: 候補ロット一覧\n\nNote:\n    - free_qty > 0 のみ返却\n    - ロック済み・期限切れは除外\n    - 並び順: expiry_date NULLS FIRST, lot_id","operationId":"get_candidate_lots_api_allocations_candidate_lots_get","parameters":[{"name":"product_id","in":"query","required":true,"schema":{"type":"integer","title":"Product Id"}},{"name":"warehouse_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":200,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateLotsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/integration/ai-ocr/submit":{"post":{"tags":["integration"],"summary":"Submit Ocr Data","description":"AI-OCR受注データ取込.\n\n処理フロー:\n1. OCR取込ログ作成\n2. 各受注レコードについて:\n   - 得意先・製品のマスタチェック\n   - 受注ヘッダ作成\n   - 受注明細作成\n   - (オプション) フォーキャストマッチング\n3. 結果サマリ返却","operationId":"submit_ocr_data_api_integration_ai_ocr_submit_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OcrSubmissionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OcrSubmissionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/integration/ai-ocr/submissions":{"get":{"tags":["integration"],"summary":"List Ocr Submissions","description":"OCR取込ログ一覧取得.","operationId":"list_ocr_submissions_api_integration_ai_ocr_submissions_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OcrSubmissionResponse"},"title":"Response List Ocr Submissions Api Integration Ai Ocr Submissions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/integration/sap/register":{"post":{"tags":["integration"],"summary":"Register To Sap","description":"SAP連携(手動送信).\n\n注意: 実際のSAP APIは実装されていません。\nこれはモック実装です。","operationId":"register_to_sap_api_integration_sap_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SapRegisterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SapRegisterResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/integration/sap/logs":{"get":{"tags":["integration"],"summary":"List Sap Logs","description":"SAP連携ログ一覧取得.","operationId":"list_sap_logs_api_integration_sap_logs_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SapSyncLogResponse"},"title":"Response List Sap Logs Api Integration Sap Logs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/stats":{"get":{"tags":["admin"],"summary":"Get Dashboard Stats","description":"ダッシュボード用の統計情報を返す.","operationId":"get_dashboard_stats_api_admin_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardStatsResponse"}}}}}}},"/api/admin/reset-database":{"post":{"tags":["admin"],"summary":"Reset Database","description":"データベースリセット（開発環境のみ）\n- テーブル構造は保持したまま、全データを削除\n- alembic_versionは保持（マイグレーション履歴を維持）\n- TRUNCATE ... RESTART IDENTITY CASCADEで高速にデータをクリア.","operationId":"reset_database_api_admin_reset_database_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseBase"}}}}}}},"/api/admin/seeds":{"post":{"tags":["admin"],"summary":"Create Seeds","description":"シードデータ生成（UPSERT方式）.\n\n- 既存データに追加する形でサンプルデータを投入\n- UPSERT（ON CONFLICT DO NOTHING）で重複を防止\n- dry_run=true で投入前のサマリのみ確認可能","operationId":"create_seeds_api_admin_seeds_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SeedRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SeedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/diagnostics/allocatable-lots":{"get":{"tags":["admin"],"summary":"Get Allocatable Lots","description":"診断API: 引当可能ロット一覧（読み取り専用）.\n\nArgs:\n    prod: 製品コード（任意フィルタ）\n    wh: 倉庫コード（任意フィルタ）\n    limit: 最大取得件数（デフォルト100）\n    db: データベースセッション\n\nReturns:\n    AllocatableLotsResponse: 引当可能ロット一覧\n\nNote:\n    - 読み取り専用トランザクション\n    - free_qty > 0 のみ\n    - ロック済み・期限切れは除外","operationId":"get_allocatable_lots_api_admin_diagnostics_allocatable_lots_get","parameters":[{"name":"prod","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Prod"}},{"name":"wh","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Wh"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllocatableLotsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/healthcheck/db-counts":{"get":{"tags":["admin"],"summary":"Get Db Counts","description":"各テーブルのレコード件数を返す.\n\nReturns:\n    dict: テーブル名をキー、件数を値とする辞書","operationId":"get_db_counts_api_admin_healthcheck_db_counts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/admin/healthcheck/masters":{"get":{"tags":["admin"],"summary":"Get Masters Health","description":"マスタテーブルのヘルスチェック.\n\nReturns:\n    dict: 各マスタテーブルの件数とサンプルデータ（先頭5件のコード）","operationId":"get_masters_health_api_admin_healthcheck_masters_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/forecast/list":{"get":{"tags":["forecast"],"summary":"List Forecast Summary","description":"Forecast一覧（フロント表示用）.","operationId":"list_forecast_summary_api_forecast_list_get","parameters":[{"name":"product_code","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Code"}},{"name":"supplier_code","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/forecast":{"get":{"tags":["forecast"],"summary":"List Forecasts","description":"フォーキャスト一覧取得 (生データ).","operationId":"list_forecasts_api_forecast_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}},{"name":"product_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Id"}},{"name":"customer_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Id"}},{"name":"product_code","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Code"}},{"name":"customer_code","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Code"}},{"name":"granularity","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Granularity"}},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},{"name":"version_no","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Version No"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ForecastResponse"},"title":"Response List Forecasts Api Forecast Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["forecast"],"summary":"Create Forecast","description":"フォーキャスト単一登録.","operationId":"create_forecast_api_forecast_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/forecast/{forecast_id}":{"get":{"tags":["forecast"],"summary":"Get Forecast","description":"フォーキャスト詳細取得.","operationId":"get_forecast_api_forecast__forecast_id__get","parameters":[{"name":"forecast_id","in":"path","required":true,"schema":{"type":"integer","title":"Forecast Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["forecast"],"summary":"Update Forecast","description":"フォーキャスト更新.","operationId":"update_forecast_api_forecast__forecast_id__put","parameters":[{"name":"forecast_id","in":"path","required":true,"schema":{"type":"integer","title":"Forecast Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["forecast"],"summary":"Delete Forecast","description":"フォーキャスト削除.","operationId":"delete_forecast_api_forecast__forecast_id__delete","parameters":[{"name":"forecast_id","in":"path","required":true,"schema":{"type":"integer","title":"Forecast Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/forecast/bulk":{"post":{"tags":["forecast"],"summary":"Bulk Import Forecasts","description":"フォーキャスト一括登録.","operationId":"bulk_import_forecasts_api_forecast_bulk_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastBulkImportRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastBulkImportResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/forecast/versions":{"get":{"tags":["forecast"],"summary":"List Versions","description":"フォーキャストバージョン一覧取得.","operationId":"list_versions_api_forecast_versions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastVersionListResponse"}}}}}}},"/api/forecast/activate":{"post":{"tags":["forecast"],"summary":"Activate Version","description":"指定バージョンをアクティブ化.","operationId":"activate_version_api_forecast_activate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastActivateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastActivateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/forecast/match":{"post":{"tags":["forecast"],"summary":"Match Forecasts","description":"フォーキャストと受注明細の手動マッチング.","operationId":"match_forecasts_api_forecast_match_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastMatchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastMatchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/warehouse-alloc/warehouses":{"get":{"tags":["warehouse-alloc"],"summary":"List Warehouses","description":"配分対象の倉庫一覧（新しいwarehouseテーブル）を取得.","operationId":"list_warehouses_api_warehouse_alloc_warehouses_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WarehouseListResponse"}}}}}}},"/api/healthz":{"get":{"tags":["health"],"summary":"Healthz","operationId":"healthz_api_healthz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/readyz":{"get":{"tags":["health"],"summary":"Readyz","operationId":"readyz_api_readyz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/health":{"get":{"tags":["health"],"summary":"Health","operationId":"health_api_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/orders/validate":{"post":{"tags":["orders"],"summary":"受注在庫検証","operationId":"validate_order_stock_api_orders_validate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderValidationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderValidationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/simulate-seed-data":{"post":{"tags":["admin"],"summary":"Simulate Seed Data","description":"テストデータシミュレーションを開始.\n\n- Reset → Insert を一括実行\n- バックグラウンドでジョブを起動\n- task_id を返す","operationId":"simulate_seed_data_api_admin_simulate_seed_data_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulateSeedRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulateSeedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/simulate-progress/{task_id}":{"get":{"tags":["admin"],"summary":"Get Simulate Progress","description":"テストデータシミュレーションの進捗を取得.\n\n- ポーリングJSONで進捗を返す（3〜5秒間隔でクライアントが呼び出す想定）","operationId":"get_simulate_progress_api_admin_simulate_progress__task_id__get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","description":"タスクID","title":"Task Id"},"description":"タスクID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulateProgressResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/simulate-result/{task_id}":{"get":{"tags":["admin"],"summary":"Get Simulate Result","description":"テストデータシミュレーションの結果を取得.\n\n- 完了サマリを返す","operationId":"get_simulate_result_api_admin_simulate_result__task_id__get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","description":"タスクID","title":"Task Id"},"description":"タスクID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulateResultResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/seed-snapshots":{"get":{"tags":["admin"],"summary":"List Seed Snapshots","description":"スナップショット一覧を取得.","operationId":"list_seed_snapshots_api_admin_seed_snapshots_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SeedSnapshotListResponse"}}}}}},"post":{"tags":["admin"],"summary":"Create Seed Snapshot","description":"スナップショットを手動作成.","operationId":"create_seed_snapshot_api_admin_seed_snapshots_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SeedSnapshotCreateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SeedSnapshotCreateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/seed-snapshots/{snapshot_id}":{"delete":{"tags":["admin"],"summary":"Delete Seed Snapshot","description":"スナップショットを削除.","operationId":"delete_seed_snapshot_api_admin_seed_snapshots__snapshot_id__delete","parameters":[{"name":"snapshot_id","in":"path","required":true,"schema":{"type":"integer","description":"スナップショットID","title":"Snapshot Id"},"description":"スナップショットID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/seed-snapshots/{snapshot_id}/restore":{"post":{"tags":["admin"],"summary":"Restore Seed Snapshot","description":"スナップショットから復元.\n\n- 保存されたパラメータで Reset → Insert を実行\n- task_id を返す","operationId":"restore_seed_snapshot_api_admin_seed_snapshots__snapshot_id__restore_post","parameters":[{"name":"snapshot_id","in":"path","required":true,"schema":{"type":"integer","description":"スナップショットID","title":"Snapshot Id"},"description":"スナップショットID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SeedSnapshotRestoreResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","description":"ルートエンドポイント.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"ActualCounts":{"properties":{"customers":{"type":"integer","title":"Customers"},"suppliers":{"type":"integer","title":"Suppliers"},"delivery_places":{"type":"integer","title":"Delivery Places"},"products":{"type":"integer","title":"Products"},"forecasts":{"type":"integer","title":"Forecasts"},"warehouses":{"type":"integer","title":"Warehouses"},"lots":{"type":"integer","title":"Lots"},"stock_movements":{"type":"integer","title":"Stock Movements"},"orders":{"type":"integer","title":"Orders"},"order_lines":{"type":"integer","title":"Order Lines"},"allocations":{"type":"integer","title":"Allocations"}},"type":"object","required":["customers","suppliers","delivery_places","products","forecasts","warehouses","lots","stock_movements","orders","order_lines","allocations"],"title":"ActualCounts","description":"実際のDB件数（投入後）."},"AllocatableLotItem":{"properties":{"lot_id":{"type":"integer","title":"Lot Id"},"lot_number":{"type":"string","title":"Lot Number"},"product_id":{"type":"integer","title":"Product Id"},"product_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Code"},"warehouse_id":{"type":"integer","title":"Warehouse Id"},"free_qty":{"type":"number","title":"Free Qty"},"current_quantity":{"type":"number","title":"Current Quantity"},"allocated_qty":{"type":"number","title":"Allocated Qty"},"expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Expiry Date"},"is_locked":{"type":"boolean","title":"Is Locked","default":false},"last_updated":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Updated"}},"type":"object","required":["lot_id","lot_number","product_id","warehouse_id","free_qty","current_quantity","allocated_qty"],"title":"AllocatableLotItem","description":"診断用引当可能ロット項目."},"AllocatableLotsResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/AllocatableLotItem"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total","default":0}},"type":"object","title":"AllocatableLotsResponse","description":"診断用引当可能ロット一覧レスポンス."},"CandidateLotItem":{"properties":{"lot_id":{"type":"integer","title":"Lot Id"},"lot_number":{"type":"string","title":"Lot Number"},"free_qty":{"type":"number","title":"Free Qty"},"current_quantity":{"type":"number","title":"Current Quantity"},"allocated_qty":{"type":"number","title":"Allocated Qty"},"product_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Product Id"},"product_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Code"},"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Expiry Date"},"last_updated":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Updated"}},"type":"object","required":["lot_id","lot_number","free_qty","current_quantity","allocated_qty"],"title":"CandidateLotItem","description":"候補ロット項目（product_id基準）."},"CandidateLotsResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/CandidateLotItem"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total","default":0}},"type":"object","title":"CandidateLotsResponse","description":"候補ロット一覧レスポンス."},"CapCheckResult":{"properties":{"lot_split":{"type":"string","title":"Lot Split","description":"ロット分割チェック（OK/NG）"},"destinations":{"type":"string","title":"Destinations","description":"納品先数チェック（OK/NG）"},"order_lines":{"type":"string","title":"Order Lines","description":"受注明細行チェック（OK/NG）"}},"type":"object","required":["lot_split","destinations","order_lines"],"title":"CapCheckResult","description":"上限チェック結果."},"CustomerCreate":{"properties":{"customer_code":{"type":"string","title":"Customer Code"},"customer_name":{"type":"string","title":"Customer Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"}},"type":"object","required":["customer_code","customer_name"],"title":"CustomerCreate"},"CustomerResponse":{"properties":{"customer_code":{"type":"string","title":"Customer Code"},"customer_name":{"type":"string","title":"Customer Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"}},"type":"object","required":["customer_code","customer_name"],"title":"CustomerResponse"},"CustomerUpdate":{"properties":{"customer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"}},"type":"object","title":"CustomerUpdate"},"DashboardStatsResponse":{"properties":{"total_stock":{"type":"number","title":"Total Stock"},"total_orders":{"type":"integer","title":"Total Orders"},"unallocated_orders":{"type":"integer","title":"Unallocated Orders"}},"type":"object","required":["total_stock","total_orders","unallocated_orders"],"title":"DashboardStatsResponse","description":"ダッシュボード統計レスポンス."},"DragAssignRequest":{"properties":{"order_line_id":{"type":"integer","title":"Order Line Id"},"lot_id":{"type":"integer","title":"Lot Id"},"allocate_qty":{"type":"number","title":"Allocate Qty"}},"type":"object","required":["order_line_id","lot_id","allocate_qty"],"title":"DragAssignRequest"},"FefoCommitResponse":{"properties":{"order_id":{"type":"integer","title":"Order Id"},"created_allocation_ids":{"items":{"type":"integer"},"type":"array","title":"Created Allocation Ids"},"preview":{"$ref":"#/components/schemas/FefoPreviewResponse"}},"type":"object","required":["order_id","preview"],"title":"FefoCommitResponse"},"FefoLineAllocation":{"properties":{"order_line_id":{"type":"integer","title":"Order Line Id"},"product_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Product Id"},"product_code":{"type":"string","title":"Product Code"},"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"required_qty":{"type":"number","title":"Required Qty"},"already_allocated_qty":{"type":"number","title":"Already Allocated Qty"},"allocations":{"items":{"$ref":"#/components/schemas/FefoLotAllocation"},"type":"array","title":"Allocations"},"next_div":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Div"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings"}},"type":"object","required":["order_line_id","product_code","required_qty","already_allocated_qty"],"title":"FefoLineAllocation"},"FefoLotAllocation":{"properties":{"lot_id":{"type":"integer","title":"Lot Id"},"lot_number":{"type":"string","title":"Lot Number"},"allocate_qty":{"type":"number","title":"Allocate Qty"},"expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Expiry Date"},"receipt_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Receipt Date"}},"type":"object","required":["lot_id","lot_number","allocate_qty"],"title":"FefoLotAllocation"},"FefoPreviewRequest":{"properties":{"order_id":{"type":"integer","title":"Order Id"}},"type":"object","required":["order_id"],"title":"FefoPreviewRequest"},"FefoPreviewResponse":{"properties":{"order_id":{"type":"integer","title":"Order Id"},"lines":{"items":{"$ref":"#/components/schemas/FefoLineAllocation"},"type":"array","title":"Lines"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings"}},"type":"object","required":["order_id"],"title":"FefoPreviewResponse"},"ForecastActivateRequest":{"properties":{"version_no":{"type":"integer","title":"Version No"},"deactivate_others":{"type":"boolean","title":"Deactivate Others","default":true}},"type":"object","required":["version_no"],"title":"ForecastActivateRequest","description":"バージョンアクティブ化リクエスト."},"ForecastActivateResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"activated_version":{"type":"integer","title":"Activated Version"},"deactivated_versions":{"items":{"type":"integer"},"type":"array","title":"Deactivated Versions","default":[]}},"type":"object","required":["success","message","activated_version"],"title":"ForecastActivateResponse","description":"バージョンアクティブ化レスポンス."},"ForecastBulkImportRequest":{"properties":{"version_no":{"type":"integer","title":"Version No"},"version_issued_at":{"type":"string","format":"date-time","title":"Version Issued At"},"source_system":{"type":"string","title":"Source System","default":"external"},"deactivate_old_version":{"type":"boolean","title":"Deactivate Old Version","default":true},"forecasts":{"items":{"$ref":"#/components/schemas/ForecastCreate"},"type":"array","title":"Forecasts"}},"type":"object","required":["version_no","version_issued_at","forecasts"],"title":"ForecastBulkImportRequest","description":"一括インポートリクエスト."},"ForecastBulkImportResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"version_no":{"type":"integer","title":"Version No"},"imported_count":{"type":"integer","title":"Imported Count"},"skipped_count":{"type":"integer","title":"Skipped Count"},"error_count":{"type":"integer","title":"Error Count"},"error_details":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Details"}},"type":"object","required":["success","message","version_no","imported_count","skipped_count","error_count"],"title":"ForecastBulkImportResponse","description":"一括インポートレスポンス."},"ForecastCreate":{"properties":{"product_id":{"type":"string","title":"Product Id"},"customer_id":{"type":"string","title":"Customer Id"},"granularity":{"type":"string","enum":["daily","dekad","monthly"],"title":"Granularity"},"qty_forecast":{"type":"integer","title":"Qty Forecast"},"version_no":{"type":"integer","title":"Version No","default":1},"source_system":{"type":"string","title":"Source System","default":"external"},"is_active":{"type":"boolean","title":"Is Active","default":true},"date_day":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date Day"},"date_dekad_start":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date Dekad Start"},"year_month":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Year Month"},"version_issued_at":{"type":"string","format":"date-time","title":"Version Issued At"}},"type":"object","required":["product_id","customer_id","granularity","qty_forecast","version_issued_at"],"title":"ForecastCreate","description":"フォーキャスト作成リクエスト."},"ForecastItemOut":{"properties":{"id":{"type":"integer","title":"Id"},"product_code":{"type":"string","title":"Product Code"},"product_name":{"type":"string","title":"Product Name"},"customer_code":{"type":"string","title":"Customer Code"},"supplier_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier Code"},"granularity":{"type":"string","title":"Granularity"},"version_no":{"type":"integer","title":"Version No"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"daily_data":{"anyOf":[{"additionalProperties":{"type":"number"},"type":"object"},{"type":"null"}],"title":"Daily Data"},"dekad_data":{"anyOf":[{"additionalProperties":{"type":"number"},"type":"object"},{"type":"null"}],"title":"Dekad Data"},"monthly_data":{"anyOf":[{"additionalProperties":{"type":"number"},"type":"object"},{"type":"null"}],"title":"Monthly Data"},"dekad_summary":{"anyOf":[{"additionalProperties":{"type":"number"},"type":"object"},{"type":"null"}],"title":"Dekad Summary"},"customer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Name","default":"得意先A (ダミー)"},"supplier_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier Name","default":"サプライヤーB (ダミー)"},"unit":{"type":"string","title":"Unit","default":"EA"},"version_history":{"items":{"type":"object"},"type":"array","title":"Version History","default":[]}},"type":"object","required":["id","product_code","product_name","customer_code","granularity","version_no","updated_at"],"title":"ForecastItemOut","description":"Forecast一覧（フロント表示用）."},"ForecastListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/ForecastItemOut"},"type":"array","title":"Items"}},"type":"object","required":["items"],"title":"ForecastListResponse"},"ForecastMatchRequest":{"properties":{"order_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Order Id"},"order_ids":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Order Ids"},"date_from":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date From"},"date_to":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date To"},"force_rematch":{"type":"boolean","title":"Force Rematch","default":false}},"type":"object","title":"ForecastMatchRequest","description":"マッチングリクエスト."},"ForecastMatchResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"total_lines":{"type":"integer","title":"Total Lines"},"matched_lines":{"type":"integer","title":"Matched Lines"},"unmatched_lines":{"type":"integer","title":"Unmatched Lines"},"results":{"items":{"$ref":"#/components/schemas/ForecastMatchResult"},"type":"array","title":"Results","default":[]}},"type":"object","required":["success","message","total_lines","matched_lines","unmatched_lines"],"title":"ForecastMatchResponse","description":"マッチングレスポンス."},"ForecastMatchResult":{"properties":{"order_line_id":{"type":"integer","title":"Order Line Id"},"order_no":{"type":"string","title":"Order No"},"line_no":{"type":"integer","title":"Line No"},"product_code":{"type":"string","title":"Product Code"},"matched":{"type":"boolean","title":"Matched"},"forecast_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Forecast Id"},"forecast_granularity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Forecast Granularity"},"forecast_match_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Forecast Match Status"},"forecast_qty":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Forecast Qty"}},"type":"object","required":["order_line_id","order_no","line_no","product_code","matched"],"title":"ForecastMatchResult","description":"個別マッチング結果."},"ForecastResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"product_id":{"type":"string","title":"Product Id"},"customer_id":{"type":"string","title":"Customer Id"},"granularity":{"type":"string","enum":["daily","dekad","monthly"],"title":"Granularity"},"qty_forecast":{"type":"integer","title":"Qty Forecast"},"version_no":{"type":"integer","title":"Version No","default":1},"source_system":{"type":"string","title":"Source System","default":"external"},"is_active":{"type":"boolean","title":"Is Active","default":true},"date_day":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date Day"},"date_dekad_start":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date Dekad Start"},"year_month":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Year Month"},"id":{"type":"integer","title":"Id"},"forecast_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Forecast Id"},"supplier_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier Id"},"version_issued_at":{"type":"string","format":"date-time","title":"Version Issued At"}},"type":"object","required":["created_at","product_id","customer_id","granularity","qty_forecast","id","version_issued_at"],"title":"ForecastResponse","description":"フォーキャストレスポンス."},"ForecastUpdate":{"properties":{"qty_forecast":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Qty Forecast"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"ForecastUpdate","description":"フォーキャスト更新リクエスト."},"ForecastVersionInfo":{"properties":{"version_no":{"type":"integer","title":"Version No"},"version_issued_at":{"type":"string","format":"date-time","title":"Version Issued At"},"is_active":{"type":"boolean","title":"Is Active"},"forecast_count":{"type":"integer","title":"Forecast Count"},"source_system":{"type":"string","title":"Source System"}},"type":"object","required":["version_no","version_issued_at","is_active","forecast_count","source_system"],"title":"ForecastVersionInfo","description":"バージョン情報."},"ForecastVersionListResponse":{"properties":{"versions":{"items":{"$ref":"#/components/schemas/ForecastVersionInfo"},"type":"array","title":"Versions"}},"type":"object","required":["versions"],"title":"ForecastVersionListResponse","description":"バージョン一覧レスポンス."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LotCreate":{"properties":{"supplier_code":{"type":"string","title":"Supplier Code"},"lot_number":{"type":"string","title":"Lot Number"},"receipt_date":{"type":"string","format":"date","title":"Receipt Date"},"mfg_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Mfg Date"},"expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Expiry Date"},"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"product_id":{"type":"integer","title":"Product Id"},"supplier_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Supplier Id"},"lot_unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lot Unit"},"kanban_class":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kanban Class"},"sales_unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sales Unit"},"inventory_unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Inventory Unit"},"received_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Received By"},"source_doc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Doc"},"qc_certificate_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qc Certificate Status"},"qc_certificate_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qc Certificate File"},"lot_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lot Status","default":"available"}},"type":"object","required":["supplier_code","lot_number","receipt_date","product_id"],"title":"LotCreate"},"LotResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"supplier_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier Code"},"lot_number":{"type":"string","title":"Lot Number"},"receipt_date":{"type":"string","format":"date","title":"Receipt Date"},"mfg_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Mfg Date"},"expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Expiry Date"},"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"product_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Product Id"},"supplier_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Supplier Id"},"lot_unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lot Unit"},"kanban_class":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kanban Class"},"sales_unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sales Unit"},"inventory_unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Inventory Unit"},"received_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Received By"},"source_doc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Doc"},"qc_certificate_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qc Certificate Status"},"qc_certificate_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qc Certificate File"},"lot_status":{"type":"string","title":"Lot Status","default":"available"},"id":{"type":"integer","title":"Id"},"product_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Code"},"current_quantity":{"type":"number","title":"Current Quantity","default":0.0},"last_updated":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Updated"},"product_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Name"}},"type":"object","required":["created_at","lot_number","receipt_date","id"],"title":"LotResponse"},"LotUpdate":{"properties":{"mfg_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Mfg Date"},"expiry_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Expiry Date"},"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"lot_unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lot Unit"},"qc_certificate_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qc Certificate Status"},"qc_certificate_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qc Certificate File"}},"type":"object","title":"LotUpdate"},"MasterBulkLoadRequest":{"properties":{"warehouses":{"items":{"$ref":"#/components/schemas/WarehouseCreate"},"type":"array","title":"Warehouses"},"suppliers":{"items":{"$ref":"#/components/schemas/SupplierCreate"},"type":"array","title":"Suppliers"},"customers":{"items":{"$ref":"#/components/schemas/CustomerCreate"},"type":"array","title":"Customers"},"products":{"items":{"$ref":"#/components/schemas/ProductCreate"},"type":"array","title":"Products"}},"type":"object","title":"MasterBulkLoadRequest","description":"Bulk load payload for master data."},"MasterBulkLoadResponse":{"properties":{"created":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object","title":"Created"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings"}},"type":"object","title":"MasterBulkLoadResponse","description":"Bulk load result summary."},"OcrOrderRecord":{"properties":{"order_no":{"type":"string","title":"Order No"},"customer_code":{"type":"string","title":"Customer Code"},"order_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Order Date"},"lines":{"items":{"$ref":"#/components/schemas/OrderLineCreate"},"type":"array","title":"Lines"}},"type":"object","required":["order_no","customer_code","lines"],"title":"OcrOrderRecord","description":"OCR受注レコード."},"OcrSubmissionRequest":{"properties":{"source":{"type":"string","title":"Source","default":"PAD"},"schema_version":{"type":"string","title":"Schema Version","default":"1.0.0"},"file_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Name"},"operator":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Operator"},"records":{"items":{"$ref":"#/components/schemas/OcrOrderRecord"},"type":"array","title":"Records"}},"type":"object","required":["records"],"title":"OcrSubmissionRequest","description":"OCR取込リクエスト."},"OcrSubmissionResponse":{"properties":{"status":{"type":"string","title":"Status"},"submission_id":{"type":"string","title":"Submission Id"},"created_orders":{"type":"integer","title":"Created Orders"},"created_lines":{"type":"integer","title":"Created Lines"},"total_records":{"type":"integer","title":"Total Records"},"processed_records":{"type":"integer","title":"Processed Records"},"failed_records":{"type":"integer","title":"Failed Records"},"skipped_records":{"type":"integer","title":"Skipped Records"},"error_details":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Details"}},"type":"object","required":["status","submission_id","created_orders","created_lines","total_records","processed_records","failed_records","skipped_records"],"title":"OcrSubmissionResponse","description":"OCR取込レスポンス."},"OrderCreate":{"properties":{"order_no":{"type":"string","title":"Order No"},"customer_code":{"type":"string","title":"Customer Code"},"order_date":{"type":"string","format":"date","title":"Order Date"},"status":{"type":"string","title":"Status","default":"open"},"customer_order_no":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Order No"},"customer_order_no_last6":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Order No Last6"},"delivery_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Mode"},"sap_order_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sap Order Id"},"sap_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sap Status"},"sap_sent_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sap Sent At"},"sap_error_msg":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sap Error Msg"},"lines":{"items":{"$ref":"#/components/schemas/OrderLineCreate"},"type":"array","title":"Lines"}},"type":"object","required":["order_no","customer_code","order_date"],"title":"OrderCreate"},"OrderLineCreate":{"properties":{"line_no":{"type":"integer","title":"Line No"},"product_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Code"},"product_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Product Id"},"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"quantity":{"type":"number","title":"Quantity"},"unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Unit"},"due_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Due Date"},"next_div":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Div"},"destination_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Destination Id"},"delivery_place_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Delivery Place Id"},"delivery_place_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Place Code"},"external_unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Unit"}},"type":"object","required":["line_no","quantity"],"title":"OrderLineCreate"},"OrderLineDemandSchema":{"properties":{"product_code":{"type":"string","title":"Product Code"},"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"quantity":{"type":"integer","exclusiveMinimum":0.0,"title":"Quantity"}},"type":"object","required":["product_code","quantity"],"title":"OrderLineDemandSchema"},"OrderLineOut":{"properties":{"id":{"type":"integer","title":"Id"},"line_no":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Line No"},"product_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Product Id"},"product_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Code"},"product_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Name"},"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"customer_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Customer Id"},"customer_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Code"},"supplier_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Supplier Id"},"supplier_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier Code"},"quantity":{"type":"number","title":"Quantity"},"unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Unit"},"due_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Due Date"},"delivery_place_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Delivery Place Id"},"delivery_place_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Place Code"},"delivery_place_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Place Name"},"warehouse_allocations":{"items":{"$ref":"#/components/schemas/WarehouseAllocOut"},"type":"array","title":"Warehouse Allocations"},"related_lots":{"items":{"type":"object"},"type":"array","title":"Related Lots"},"allocated_lots":{"items":{"type":"object"},"type":"array","title":"Allocated Lots"},"allocated_qty":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Allocated Qty"},"next_div":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Div"}},"type":"object","required":["id","quantity"],"title":"OrderLineOut"},"OrderResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"order_no":{"type":"string","title":"Order No"},"customer_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Code"},"order_date":{"type":"string","format":"date","title":"Order Date"},"status":{"type":"string","title":"Status","default":"open"},"customer_order_no":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Order No"},"customer_order_no_last6":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Order No Last6"},"delivery_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Mode"},"sap_order_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sap Order Id"},"sap_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sap Status"},"sap_sent_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sap Sent At"},"sap_error_msg":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sap Error Msg"},"id":{"type":"integer","title":"Id"},"customer_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Customer Id"}},"type":"object","required":["created_at","order_no","order_date","id"],"title":"OrderResponse"},"OrderStatusUpdate":{"properties":{"status":{"type":"string","minLength":1,"title":"Status","description":"新しいステータス（open, allocated, shipped, closed, cancelled）","examples":["allocated","shipped"]}},"type":"object","required":["status"],"title":"OrderStatusUpdate","description":"受注ステータス更新用スキーマ.\n\nNote:\n    constrを使用してstatusが空文字でないことを保証"},"OrderValidationDetails":{"properties":{"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"per_lot":{"items":{"$ref":"#/components/schemas/OrderValidationLotAvailability"},"type":"array","title":"Per Lot"},"ship_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Ship Date"}},"type":"object","title":"OrderValidationDetails"},"OrderValidationErrorData":{"properties":{"product_code":{"type":"string","title":"Product Code"},"required":{"type":"integer","title":"Required"},"available":{"type":"integer","title":"Available"},"details":{"$ref":"#/components/schemas/OrderValidationDetails"}},"type":"object","required":["product_code","required","available","details"],"title":"OrderValidationErrorData"},"OrderValidationLotAvailability":{"properties":{"lot_id":{"type":"integer","title":"Lot Id"},"available":{"type":"integer","title":"Available"}},"type":"object","required":["lot_id","available"],"title":"OrderValidationLotAvailability"},"OrderValidationRequest":{"properties":{"lines":{"items":{"$ref":"#/components/schemas/OrderLineDemandSchema"},"type":"array","title":"Lines"},"ship_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Ship Date"}},"type":"object","required":["lines"],"title":"OrderValidationRequest"},"OrderValidationResponse":{"properties":{"ok":{"type":"boolean","title":"Ok"},"message":{"type":"string","title":"Message"},"data":{"anyOf":[{"$ref":"#/components/schemas/OrderValidationErrorData"},{"type":"null"}]}},"type":"object","required":["ok","message"],"title":"OrderValidationResponse"},"OrderWithLinesResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"order_no":{"type":"string","title":"Order No"},"customer_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Code"},"order_date":{"type":"string","format":"date","title":"Order Date"},"status":{"type":"string","title":"Status","default":"open"},"customer_order_no":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Order No"},"customer_order_no_last6":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Order No Last6"},"delivery_mode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Mode"},"sap_order_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sap Order Id"},"sap_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sap Status"},"sap_sent_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sap Sent At"},"sap_error_msg":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sap Error Msg"},"id":{"type":"integer","title":"Id"},"customer_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Customer Id"},"lines":{"items":{"$ref":"#/components/schemas/OrderLineOut"},"type":"array","title":"Lines"}},"type":"object","required":["created_at","order_no","order_date","id"],"title":"OrderWithLinesResponse"},"ProductCreate":{"properties":{"product_code":{"type":"string","title":"Product Code"},"product_name":{"type":"string","title":"Product Name"},"customer_part_no":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Part No"},"maker_item_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Maker Item Code"},"supplier_item_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier Item Code"},"packaging_qty":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string"}],"title":"Packaging Qty"},"packaging_unit":{"type":"string","minLength":1,"title":"Packaging Unit"},"internal_unit":{"type":"string","minLength":1,"title":"Internal Unit"},"base_unit":{"type":"string","title":"Base Unit","default":"EA"},"assemble_div":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assemble Div"},"next_div":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Div"},"ji_ku_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ji Ku Text"},"kumitsuke_ku_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kumitsuke Ku Text"},"shelf_life_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Shelf Life Days"},"requires_lot_number":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Requires Lot Number"},"delivery_place_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Delivery Place Id"},"delivery_place_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Place Code"},"delivery_place_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Place Name"},"shipping_warehouse_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shipping Warehouse Name"}},"type":"object","required":["product_code","product_name","packaging_qty","packaging_unit","internal_unit"],"title":"ProductCreate"},"ProductResponse":{"properties":{"product_code":{"type":"string","title":"Product Code"},"product_name":{"type":"string","title":"Product Name"},"customer_part_no":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Part No"},"maker_item_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Maker Item Code"},"supplier_item_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier Item Code"},"packaging_qty":{"type":"string","title":"Packaging Qty"},"packaging_unit":{"type":"string","minLength":1,"title":"Packaging Unit"},"internal_unit":{"type":"string","minLength":1,"title":"Internal Unit"},"base_unit":{"type":"string","title":"Base Unit","default":"EA"},"assemble_div":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assemble Div"},"next_div":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Div"},"ji_ku_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ji Ku Text"},"kumitsuke_ku_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kumitsuke Ku Text"},"shelf_life_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Shelf Life Days"},"requires_lot_number":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Requires Lot Number"},"delivery_place_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Delivery Place Id"},"delivery_place_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Place Code"},"delivery_place_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Place Name"},"shipping_warehouse_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shipping Warehouse Name"}},"type":"object","required":["product_code","product_name","packaging_qty","packaging_unit","internal_unit"],"title":"ProductResponse"},"ProductUpdate":{"properties":{"product_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Name"},"customer_part_no":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Part No"},"maker_item_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Maker Item Code"},"supplier_item_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier Item Code"},"packaging_qty":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string"},{"type":"null"}],"title":"Packaging Qty"},"packaging_unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Packaging Unit"},"internal_unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Internal Unit"},"base_unit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Base Unit"},"assemble_div":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assemble Div"},"next_div":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Div"},"ji_ku_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ji Ku Text"},"kumitsuke_ku_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Kumitsuke Ku Text"},"shelf_life_days":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Shelf Life Days"},"requires_lot_number":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Requires Lot Number"},"delivery_place_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Delivery Place Id"},"delivery_place_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Place Code"},"delivery_place_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Place Name"},"shipping_warehouse_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shipping Warehouse Name"}},"type":"object","title":"ProductUpdate"},"ResponseBase":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"data":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Data"}},"type":"object","required":["success"],"title":"ResponseBase","description":"API共通レスポンス."},"SapRegisterOptions":{"properties":{"retry":{"type":"integer","title":"Retry","default":1},"timeout_sec":{"type":"integer","title":"Timeout Sec","default":30}},"type":"object","title":"SapRegisterOptions","description":"SAP送信オプション."},"SapRegisterRequest":{"properties":{"target":{"$ref":"#/components/schemas/SapRegisterTarget"},"options":{"anyOf":[{"$ref":"#/components/schemas/SapRegisterOptions"},{"type":"null"}],"default":{"retry":1,"timeout_sec":30}}},"type":"object","required":["target"],"title":"SapRegisterRequest","description":"SAP送信リクエスト."},"SapRegisterResponse":{"properties":{"status":{"type":"string","title":"Status"},"sap_order_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sap Order Id"},"sap_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sap Status"},"sent":{"type":"integer","title":"Sent"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["status","sent"],"title":"SapRegisterResponse","description":"SAP送信レスポンス."},"SapRegisterTarget":{"properties":{"type":{"type":"string","title":"Type"},"value":{"title":"Value"}},"type":"object","required":["type","value"],"title":"SapRegisterTarget","description":"SAP送信対象指定."},"SapSyncLogResponse":{"properties":{"id":{"type":"integer","title":"Id"},"order_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Order Id"},"payload":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payload"},"result":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Result"},"status":{"type":"string","title":"Status"},"executed_at":{"type":"string","format":"date-time","title":"Executed At"}},"type":"object","required":["id","status","executed_at"],"title":"SapSyncLogResponse","description":"SAP連携ログレスポンス."},"SeedRequest":{"properties":{"seed":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Seed","description":"Random seed for reproducibility","default":42},"dry_run":{"type":"boolean","title":"Dry Run","default":false},"customers":{"type":"integer","minimum":0.0,"title":"Customers","default":3},"suppliers":{"type":"integer","minimum":0.0,"title":"Suppliers","default":2},"delivery_places":{"type":"integer","minimum":0.0,"title":"Delivery Places","default":2},"products":{"type":"integer","minimum":0.0,"title":"Products","default":5},"forecasts":{"type":"integer","minimum":0.0,"title":"Forecasts","default":0},"warehouses":{"type":"integer","minimum":0.0,"title":"Warehouses","default":2},"lots":{"type":"integer","minimum":0.0,"title":"Lots","default":10},"orders":{"type":"integer","minimum":0.0,"title":"Orders","default":5}},"type":"object","title":"SeedRequest"},"SeedResponse":{"properties":{"dry_run":{"type":"boolean","title":"Dry Run"},"seed":{"type":"integer","title":"Seed"},"summary":{"$ref":"#/components/schemas/SeedSummary"},"actual_counts":{"anyOf":[{"$ref":"#/components/schemas/ActualCounts"},{"type":"null"}],"description":"投入後の実際のDB件数（dry_run=falseの場合のみ）"}},"type":"object","required":["dry_run","seed","summary"],"title":"SeedResponse"},"SeedSnapshotCreateRequest":{"properties":{"name":{"type":"string","title":"Name","description":"スナップショット名"},"params_json":{"type":"object","title":"Params Json","description":"パラメータJSON"},"profile_json":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Profile Json","description":"プロファイルJSON"},"summary_json":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Summary Json","description":"サマリJSON"}},"type":"object","required":["name","params_json"],"title":"SeedSnapshotCreateRequest","description":"スナップショット作成リクエスト."},"SeedSnapshotCreateResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","name","created_at"],"title":"SeedSnapshotCreateResponse","description":"スナップショット作成レスポンス."},"SeedSnapshotListItem":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"params_json":{"type":"object","title":"Params Json"},"summary_json":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Summary Json"}},"type":"object","required":["id","name","created_at","params_json"],"title":"SeedSnapshotListItem","description":"スナップショットリストアイテム."},"SeedSnapshotListResponse":{"properties":{"snapshots":{"items":{"$ref":"#/components/schemas/SeedSnapshotListItem"},"type":"array","title":"Snapshots"}},"type":"object","required":["snapshots"],"title":"SeedSnapshotListResponse","description":"スナップショット一覧レスポンス."},"SeedSnapshotRestoreResponse":{"properties":{"task_id":{"type":"string","title":"Task Id"},"message":{"type":"string","title":"Message"}},"type":"object","required":["task_id","message"],"title":"SeedSnapshotRestoreResponse","description":"スナップショット復元レスポンス."},"SeedSummary":{"properties":{"customers":{"type":"integer","title":"Customers"},"suppliers":{"type":"integer","title":"Suppliers"},"delivery_places":{"type":"integer","title":"Delivery Places"},"products":{"type":"integer","title":"Products"},"forecasts":{"type":"integer","title":"Forecasts"},"warehouses":{"type":"integer","title":"Warehouses"},"lots":{"type":"integer","title":"Lots"},"orders":{"type":"integer","title":"Orders"},"order_lines":{"type":"integer","title":"Order Lines"},"allocations":{"type":"integer","title":"Allocations"}},"type":"object","required":["customers","suppliers","delivery_places","products","forecasts","warehouses","lots","orders","order_lines","allocations"],"title":"SeedSummary","description":"作成しようとした件数（UPSERT前）."},"SimulateProgressResponse":{"properties":{"task_id":{"type":"string","title":"Task Id"},"status":{"type":"string","title":"Status"},"phase":{"type":"string","title":"Phase"},"progress_pct":{"type":"integer","title":"Progress Pct"},"logs":{"items":{"type":"string"},"type":"array","title":"Logs"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["task_id","status","phase","progress_pct","logs"],"title":"SimulateProgressResponse","description":"テストデータシミュレーション進捗レスポンス."},"SimulateResultResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"summary":{"anyOf":[{"$ref":"#/components/schemas/SimulateResultSummary"},{"type":"null"}]},"snapshot_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Snapshot Id"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["success"],"title":"SimulateResultResponse","description":"テストデータシミュレーション結果レスポンス."},"SimulateResultSummary":{"properties":{"warehouses":{"type":"integer","title":"Warehouses"},"forecasts":{"type":"integer","title":"Forecasts","description":"需要予測データ件数","default":0},"orders":{"type":"integer","title":"Orders"},"order_lines":{"type":"integer","title":"Order Lines"},"lots":{"type":"integer","title":"Lots"},"allocations":{"type":"integer","title":"Allocations"},"cap_checks":{"$ref":"#/components/schemas/CapCheckResult"},"stock_equation_ok":{"type":"boolean","title":"Stock Equation Ok"},"orphan_count":{"type":"integer","title":"Orphan Count","description":"孤児レコード数","default":0}},"type":"object","required":["warehouses","orders","order_lines","lots","allocations","cap_checks","stock_equation_ok"],"title":"SimulateResultSummary","description":"テストデータシミュレーション結果サマリ."},"SimulateSeedRequest":{"properties":{"profile":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Profile","description":"プロファイル名（small/medium/large_near、Noneの場合はデフォルト）"},"random_seed":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Random Seed","description":"乱数シード（Noneの場合は現在時刻を使用）"},"warehouses":{"type":"integer","maximum":10.0,"minimum":1.0,"title":"Warehouses","description":"倉庫数（1〜10、既定=2）","default":2},"customers":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Customers","description":"顧客数（0以上、Noneの場合はプロファイル既定）","default":3},"suppliers":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Suppliers","description":"仕入先数（0以上、Noneの場合はプロファイル既定）","default":2},"products":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Products","description":"製品数（0以上、Noneの場合はプロファイル既定）","default":5},"lots":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Lots","description":"ロット数（0以上、Noneの場合はプロファイル既定）","default":10},"orders":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Orders","description":"受注数（0以上、Noneの場合はプロファイル既定）","default":5},"lot_split_max_per_line":{"type":"integer","maximum":3.0,"minimum":1.0,"title":"Lot Split Max Per Line","description":"1明細あたりロット分割上限（1〜3、既定=1）","default":1},"order_line_items_per_order":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Order Line Items Per Order","description":"受注明細行の上限（1〜5、既定=1）","default":1},"destinations_max_per_order":{"type":"integer","title":"Destinations Max Per Order","description":"受注の納品先上限（常に5固定）","default":5},"forecasts":{"anyOf":[{"type":"integer","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Forecasts","description":"需要予測データ生成（0=無効, 1=有効, Noneはプロファイル既定）","default":1},"save_snapshot":{"type":"boolean","title":"Save Snapshot","description":"スナップショットを保存するか","default":true},"snapshot_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Snapshot Name","description":"スナップショット名（自動生成の場合はNone）"},"use_last_snapshot":{"type":"boolean","title":"Use Last Snapshot","description":"最後のスナップショットを使用するか","default":false},"case_mix":{"anyOf":[{"additionalProperties":{"type":"number"},"type":"object"},{"type":"null"}],"title":"Case Mix","description":"ケースミックス比率（API上書き用、合計<=1.0）"}},"type":"object","title":"SimulateSeedRequest","description":"テストデータシミュレーションリクエスト."},"SimulateSeedResponse":{"properties":{"task_id":{"type":"string","title":"Task Id","description":"ジョブID"},"message":{"type":"string","title":"Message","description":"メッセージ"}},"type":"object","required":["task_id","message"],"title":"SimulateSeedResponse","description":"テストデータシミュレーション開始レスポンス."},"StockMovementCreate":{"properties":{"product_id":{"type":"string","title":"Product Id"},"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"lot_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lot Id"},"quantity_delta":{"type":"number","title":"Quantity Delta"},"reason":{"type":"string","title":"Reason"},"source_table":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Table"},"source_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Source Id"},"batch_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Batch Id"},"created_by":{"type":"string","title":"Created By","default":"system"}},"type":"object","required":["product_id","quantity_delta","reason"],"title":"StockMovementCreate"},"StockMovementResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"product_id":{"type":"string","title":"Product Id"},"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"lot_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lot Id"},"quantity_delta":{"type":"number","title":"Quantity Delta"},"reason":{"type":"string","title":"Reason"},"source_table":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Table"},"source_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Source Id"},"batch_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Batch Id"},"created_by":{"type":"string","title":"Created By","default":"system"},"id":{"type":"integer","title":"Id"},"occurred_at":{"type":"string","format":"date-time","title":"Occurred At"}},"type":"object","required":["created_at","product_id","quantity_delta","reason","id","occurred_at"],"title":"StockMovementResponse"},"SupplierCreate":{"properties":{"supplier_code":{"type":"string","title":"Supplier Code"},"supplier_name":{"type":"string","title":"Supplier Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"}},"type":"object","required":["supplier_code","supplier_name"],"title":"SupplierCreate"},"SupplierResponse":{"properties":{"supplier_code":{"type":"string","title":"Supplier Code"},"supplier_name":{"type":"string","title":"Supplier Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"}},"type":"object","required":["supplier_code","supplier_name"],"title":"SupplierResponse"},"SupplierUpdate":{"properties":{"supplier_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Supplier Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"}},"type":"object","title":"SupplierUpdate"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WarehouseAllocOut":{"properties":{"warehouse_id":{"type":"integer","title":"Warehouse Id"},"quantity":{"type":"number","title":"Quantity"}},"type":"object","required":["warehouse_id","quantity"],"title":"WarehouseAllocOut"},"WarehouseCreate":{"properties":{"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"warehouse_name":{"type":"string","title":"Warehouse Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"is_active":{"type":"integer","title":"Is Active","default":1}},"type":"object","required":["warehouse_name"],"title":"WarehouseCreate"},"WarehouseListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/WarehouseOut"},"type":"array","title":"Items"}},"type":"object","required":["items"],"title":"WarehouseListResponse"},"WarehouseOut":{"properties":{"warehouse_id":{"type":"integer","title":"Warehouse Id"},"warehouse_name":{"type":"string","title":"Warehouse Name"}},"type":"object","required":["warehouse_id","warehouse_name"],"title":"WarehouseOut"},"WarehouseResponse":{"properties":{"warehouse_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Warehouse Id"},"warehouse_name":{"type":"string","title":"Warehouse Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"is_active":{"type":"integer","title":"Is Active","default":1}},"type":"object","required":["warehouse_name"],"title":"WarehouseResponse"},"WarehouseUpdate":{"properties":{"warehouse_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Warehouse Name"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"is_active":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Is Active","default":1}},"type":"object","title":"WarehouseUpdate"}}}}
diff --git forkSrcPrefix/backend/alembic/versions/3c7057758764_align_warehouse_fks_and_indexes.py forkDstPrefix/backend/alembic/versions/3c7057758764_align_warehouse_fks_and_indexes.py
new file mode 100644
index 0000000000000000000000000000000000000000..3586e250d5ea8546fa23b245021fc7d0b373aa76
--- /dev/null
+++ forkDstPrefix/backend/alembic/versions/3c7057758764_align_warehouse_fks_and_indexes.py
@@ -0,0 +1,115 @@
+import sqlalchemy as sa
+
+from alembic import op
+
+# revision identifiers, used by Alembic.
+revision = "3c7057758764"
+down_revision = "5d9ef798173e"
+branch_labels = None
+depends_on = None
+
+
+def upgrade():
+    bind = op.get_bind()
+    insp = sa.inspect(bind)
+
+    # --- 1) receipt_headers: warehouse_code -> warehouse_id
+    cols = {c["name"] for c in insp.get_columns("receipt_headers")}
+    if "warehouse_id" not in cols:
+        op.add_column(
+            "receipt_headers",
+            sa.Column("warehouse_id", sa.BigInteger(), nullable=True),
+        )
+
+        # ãƒãƒƒã‚¯ãƒ•ã‚£ãƒ«ï¼ˆcodeã‹ã‚‰idã¸ï¼‰
+        op.execute("""
+            UPDATE receipt_headers rh
+            SET warehouse_id = w.id
+            FROM warehouses w
+            WHERE w.warehouse_code = rh.warehouse_code
+        """)
+
+        # æœªãƒžãƒƒãƒãŒãªã„ã‹ç¢ºèªï¼ˆNULLãŒæ®‹ã‚‹ã¨NOT NULLã«ã§ããªã„ï¼‰
+        # ã“ã“ã§NULLãŒæ®‹ã‚‹å ´åˆã¯ã€ã„ã£ãŸã‚“NULLè¨±å®¹ã®ã¾ã¾ã«ã™ã‚‹ã‹ã€æ‰‹å½“ã™ã‚‹
+        # op.execute("...ãƒ­ã‚®ãƒ³ã‚°ç”¨INSERT SELECT ...") ç­‰ã‚‚å¯
+
+        # FK ä»˜ä¸Žï¼ˆå¿…è¦ãªã‚‰ ON UPDATE/DELETE æ–¹é‡ã«åˆã‚ã›ã¦èª¿æ•´ï¼‰
+        op.create_foreign_key(
+            "fk_receipt_headers_warehouse_id",
+            source_table="receipt_headers",
+            referent_table="warehouses",
+            local_cols=["warehouse_id"],
+            remote_cols=["id"],
+            ondelete="RESTRICT",
+        )
+
+        # å…¨ã¦ç´ã¥ã‘ã§ãã¦ã„ã‚‹å‰æãªã‚‰NOT NULL
+        op.execute("""
+            ALTER TABLE receipt_headers
+            ALTER COLUMN warehouse_id SET NOT NULL
+        """)
+
+        # æ—§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹/åˆ¶ç´„ãŒã‚ã‚Œã°dropã—ã¦ã‹ã‚‰â€¦
+        # op.drop_constraint("fk_receipt_headers_warehouse_code", "receipt_headers", type_="foreignkey")
+        # æ—§ã‚«ãƒ©ãƒ ã‚’æ¶ˆã™ãªã‚‰ã“ã“ã§
+        op.drop_column("receipt_headers", "warehouse_code")
+
+    # --- 2) ä»–ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚‚åŒæ§˜ã«æƒãˆã‚‹ï¼ˆä¾‹ï¼šstock_movements ç­‰ï¼‰
+    # DatatypeMismatchãŒå‡ºã¦ã„ãŸãƒ†ãƒ¼ãƒ–ãƒ«ã¯ã€åŒã˜æ‰‹é †ã§ codeâ†’id ã«ç½®æ›
+    for tbl in ("stock_movements", "receipt_lines", "lots", "order_headers", "order_lines"):
+        if insp.has_table(tbl):
+            tcols = {c["name"] for c in insp.get_columns(tbl)}
+            if "warehouse_code" in tcols and "warehouse_id" not in tcols:
+                op.add_column(tbl, sa.Column("warehouse_id", sa.BigInteger(), nullable=True))
+                op.execute(f"""
+                    UPDATE {tbl} t
+                    SET warehouse_id = w.id
+                    FROM warehouses w
+                    WHERE w.warehouse_code = t.warehouse_code
+                """)
+                op.create_foreign_key(
+                    f"fk_{tbl}_warehouse_id",
+                    source_table=tbl,
+                    referent_table="warehouses",
+                    local_cols=["warehouse_id"],
+                    remote_cols=["id"],
+                    ondelete="RESTRICT",
+                )
+                # å¿…è¦ãªã‚‰NOT NULLåŒ–ï¼ˆNULLæ®‹å­˜ãŒç„¡ã„ã“ã¨ã‚’ç¢ºèªã§ãã‚‹æ™‚ã ã‘ï¼‰
+                op.execute(f"""
+                    ALTER TABLE {tbl}
+                    ALTER COLUMN warehouse_id SET NOT NULL
+                """)
+                op.drop_column(tbl, "warehouse_code")
+
+
+def downgrade():
+    # å¯èƒ½ãªã‚‰é€†å¤‰æ›ï¼ˆidâ†’codeï¼‰ã‚’è¨˜è¿°ã€‚
+    # çœç•¥ä¾‹ï¼šwarehouse_code ã‚’å¾©å…ƒã—ã¦ã‚³ãƒ”ãƒ¼ã—ã€FK/åˆ—ã‚’æˆ»ã™
+    bind = op.get_bind()
+    insp = sa.inspect(bind)
+
+    def revert_table(tbl):
+        tcols = {c["name"] for c in insp.get_columns(tbl)}
+        if "warehouse_id" in tcols and "warehouse_code" not in tcols:
+            op.add_column(tbl, sa.Column("warehouse_code", sa.String(length=50), nullable=True))
+            op.execute(f"""
+                UPDATE {tbl} t
+                SET warehouse_code = w.warehouse_code
+                FROM warehouses w
+                WHERE w.id = t.warehouse_id
+            """)
+            # æ—§åˆ¶ç´„ã‚’æˆ»ã™ãªã‚‰ã“ã“ã«
+            op.drop_constraint(f"fk_{tbl}_warehouse_id", tbl, type_="foreignkey")
+            op.drop_column(tbl, "warehouse_id")
+
+    for tbl in (
+        "receipt_headers",
+        "stock_movements",
+        "receipt_lines",
+        "lots",
+        "order_headers",
+        "order_lines",
+    ):
+        if insp.has_table(tbl):
+            revert_table(tbl)
diff --git forkSrcPrefix/backend/app/models/inventory.py forkDstPrefix/backend/app/models/inventory.py
index fdd79ccbee80dc9c5143a4d24cdfc8f4f9e2b8d6..c8792e540d448265eea109805868f81ebab10f1d 100644
--- forkSrcPrefix/backend/app/models/inventory.py
+++ forkDstPrefix/backend/app/models/inventory.py
@@ -4,7 +4,10 @@
 ãƒ­ãƒƒãƒˆã€åœ¨åº«å¤‰å‹•ã€ç¾åœ¨åœ¨åº«ã€å…¥è·ã€æœ‰åŠ¹æœŸé™ãƒ«ãƒ¼ãƒ«
 """
 
+from __future__ import annotations
+
 from enum import Enum as PyEnum
+from typing import TYPE_CHECKING
 
 from sqlalchemy import (
     BigInteger,
@@ -12,7 +15,6 @@ from sqlalchemy import (
     Column,
     Date,
     DateTime,
-    Enum,
     Float,
     ForeignKey,
     Index,
@@ -22,10 +24,14 @@ from sqlalchemy import (
     UniqueConstraint,
     func,
 )
-from sqlalchemy.orm import relationship
+from sqlalchemy.orm import Mapped, relationship
 
 from .base_model import AuditMixin, Base
 
+# åž‹ãƒã‚§ãƒƒã‚¯æ™‚ã®ã¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆå¾ªç’°ã‚¤ãƒ³ãƒãƒ¼ãƒˆå›žé¿ï¼‰
+if TYPE_CHECKING:
+    from .masters import Warehouse
+
 
 class StockMovementReason(PyEnum):
     """åœ¨åº«å¤‰å‹•ç†ç”±"""
@@ -54,16 +60,11 @@ class Lot(AuditMixin, Base):
     mfg_date = Column(Date, nullable=True)
     expiry_date = Column(Date, nullable=True)
 
-    # ðŸ”½ DBå®Ÿæ…‹ã«åˆã‚ã›ã¦ BigInteger & FK å…ˆã‚’è¤‡æ•°å½¢ã¸
+    # ðŸ”§ ä¿®æ­£: BigInteger & FKå…ˆã‚’ warehouses.id ã¸
     warehouse_id = Column(
-        BigInteger, ForeignKey("warehouses.id", ondelete="RESTRICT"), nullable=True
-    )
-    __table_args__ = (
-        UniqueConstraint(
-            "supplier_code", "product_code", "lot_number", name="uq_lot_supplier_product_no"
-        ),
-        Index("ix_lots_warehouse_id", "warehouse_id"),
+        BigInteger, ForeignKey("warehouses.id", ondelete="RESTRICT"), nullable=True, index=True
     )
+
     lot_unit = Column(String(10), nullable=True)  # ãƒ­ãƒƒãƒˆå˜ä½ï¼ˆä¾‹: CAN, KGï¼‰
     kanban_class = Column(Text, nullable=True)
     sales_unit = Column(Text, nullable=True)
@@ -90,11 +91,14 @@ class Lot(AuditMixin, Base):
     supplier = relationship("Supplier", back_populates="lots")
     product = relationship("Product", back_populates="lots")
     # FKã‚«ãƒ©ãƒ ã‚’æ˜Žç¤ºã—ã¦ãŠãã¨å®‰å…¨
-    warehouse = relationship("Warehouse", back_populates="lots", foreign_keys="Lot.warehouse_id")
-    stock_movements = relationship(
+    warehouse: Mapped["Warehouse"] = relationship(
+        "Warehouse", back_populates="lots", foreign_keys=[warehouse_id]
+    )
+    stock_movements: Mapped[list["StockMovement"]] = relationship(
         "StockMovement", back_populates="lot", cascade="all, delete-orphan"
     )
-    current_stock = relationship(
+    # 1å¯¾1ï¼ˆuselist=Falseï¼‰ã®å ´åˆã¯ Optional ãŒè‡ªç„¶
+    current_stock: Mapped["LotCurrentStock | None"] = relationship(
         "LotCurrentStock",
         back_populates="lot",
         uselist=False,
@@ -113,19 +117,26 @@ class StockMovement(AuditMixin, Base):
     __tablename__ = "stock_movements"
 
     id = Column(Integer, primary_key=True, autoincrement=True)
-    lot_id = Column(Integer, ForeignKey("lots.id"), nullable=False)
-    warehouse_id = Column(Integer, ForeignKey("warehouse.id"), nullable=False)
-    movement_type = Column(Enum(StockMovementReason), nullable=False)  # receipt, shipment, etc.
-    quantity = Column(Float, nullable=False)  # æ­£: å…¥åº«, è² : å‡ºåº«
-    related_id = Column(Text, nullable=True)  # é–¢é€£ä¼ç¥¨ç•ªå·
-    notes = Column(Text, nullable=True)
-    movement_date = Column(DateTime, nullable=False, server_default=func.now())
+    lot_id = Column(Integer, ForeignKey("lots.id"), nullable=False, index=True)
+
+    # ðŸ”§ ä¿®æ­£: BigInteger & FKå…ˆã‚’ warehouses.id ã¸ã€index è¿½åŠ 
+    warehouse_id = Column(BigInteger, ForeignKey("warehouses.id"), nullable=False, index=True)
+
+    product_id = Column(Text, nullable=False)
+    reason = Column(Text, nullable=False)
+    quantity_delta = Column(Float, nullable=False)
+    source_table = Column(String(50), nullable=True)
+    source_id = Column(Integer, nullable=True)
+    batch_id = Column(String(100), nullable=True)
+    occurred_at = Column(DateTime, nullable=True)
 
     __table_args__ = (Index("ix_stock_movements_lot", "lot_id"),)
 
     # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
     lot = relationship("Lot", back_populates="stock_movements")
-    warehouse = relationship("Warehouse", back_populates="stock_movements")
+    warehouse: Mapped["Warehouse"] = relationship(
+        "Warehouse", back_populates="stock_movements", foreign_keys=[warehouse_id]
+    )
 
 
 class LotCurrentStock(AuditMixin, Base):
@@ -141,7 +152,7 @@ class LotCurrentStock(AuditMixin, Base):
     last_updated = Column(DateTime, server_default=func.now(), onupdate=func.now())
 
     # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
-    lot = relationship("Lot", back_populates="current_stock")
+    lot: Mapped["Lot"] = relationship("Lot", back_populates="current_stock")
 
 
 class ReceiptHeader(AuditMixin, Base):
@@ -153,15 +164,17 @@ class ReceiptHeader(AuditMixin, Base):
     receipt_no = Column(Text, unique=True)
     supplier_code = Column(Text, ForeignKey("suppliers.supplier_code"), nullable=False)
 
-    # ðŸ”½ ä¿®æ­£: warehouse_idã‚’ä½¿ç”¨
-    warehouse_id = Column(Integer, ForeignKey("warehouse.id"), nullable=False)
+    # ðŸ”§ ä¿®æ­£: BigInteger & FKå…ˆã‚’ warehouses.id ã¸ã€index è¿½åŠ 
+    warehouse_id = Column(BigInteger, ForeignKey("warehouses.id"), nullable=False, index=True)
 
     receipt_date = Column(Date, nullable=False)
     created_by = Column(Text)
     notes = Column(Text)
 
     # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
-    warehouse = relationship("Warehouse", back_populates="receipt_headers")
+    warehouse: Mapped["Warehouse"] = relationship(
+        "Warehouse", back_populates="receipt_headers", foreign_keys=[warehouse_id]
+    )
     lines = relationship("ReceiptLine", back_populates="header", cascade="all, delete-orphan")
 
 
@@ -184,8 +197,8 @@ class ReceiptLine(AuditMixin, Base):
     __table_args__ = (UniqueConstraint("header_id", "line_no", name="uq_receipt_line"),)
 
     # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
-    header = relationship("ReceiptHeader", back_populates="lines")
-    lot = relationship("Lot", back_populates="receipt_lines")
+    header: Mapped["ReceiptHeader"] = relationship("ReceiptHeader", back_populates="lines")
+    lot: Mapped["Lot"] = relationship("Lot", back_populates="receipt_lines")
 
 
 class ExpiryRule(AuditMixin, Base):
diff --git forkSrcPrefix/backend/app/models/masters.py forkDstPrefix/backend/app/models/masters.py
index 86ca1f46b52673bf28ad67a55333d30914138078..6d40c3d78fc060ceb6301a33386d4d1b656fb39a 100644
--- forkSrcPrefix/backend/app/models/masters.py
+++ forkDstPrefix/backend/app/models/masters.py
@@ -24,6 +24,11 @@ from sqlalchemy.orm import Mapped, relationship, synonym
 
 from .base_model import AuditMixin, Base
 
+# åž‹ãƒã‚§ãƒƒã‚¯æ™‚ã®ã¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆå¾ªç’°ã‚¤ãƒ³ãƒãƒ¼ãƒˆå›žé¿ï¼‰
+if TYPE_CHECKING:
+    from .inventory import Lot, StockMovement, ReceiptHeader
+    from .orders import OrderLineWarehouseAllocation
+
 
 class Warehouse(AuditMixin, Base):
     """
@@ -41,15 +46,17 @@ class Warehouse(AuditMixin, Base):
     is_active = Column(Integer, default=1)
 
     # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
-    stock_movements = relationship(
+    # ðŸ”§ ä¿®æ­£: foreign_keys ã‚’æ˜Žç¤º
+    stock_movements: Mapped[list["StockMovement"]] = relationship(
         "StockMovement",
         back_populates="warehouse",
+        foreign_keys="StockMovement.warehouse_id",
     )
-    receipt_headers = relationship(
+    receipt_headers: Mapped[list["ReceiptHeader"]] = relationship(
         "ReceiptHeader",
         back_populates="warehouse",
+        foreign_keys="ReceiptHeader.warehouse_id",
     )
-    # OrderLineWarehouseAllocationã¯orders.pyã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹
     warehouse_allocations: Mapped[list["OrderLineWarehouseAllocation"]] = relationship(
         "OrderLineWarehouseAllocation",
         back_populates="warehouse",
@@ -61,12 +68,6 @@ class Warehouse(AuditMixin, Base):
     )
 
 
-# åž‹ãƒã‚§ãƒƒã‚«å°‚ç”¨ã®å‰æ–¹å‚ç…§ï¼ˆå®Ÿè¡Œæ™‚ã«ã¯è©•ä¾¡ã•ã‚Œãªã„ï¼‰
-if TYPE_CHECKING:
-    from .inventory import Lot
-    from .orders import OrderLineWarehouseAllocation
-
-
 class Supplier(AuditMixin, Base):
     """ä»•å…¥å…ˆãƒžã‚¹ã‚¿"""
 
@@ -74,30 +75,12 @@ class Supplier(AuditMixin, Base):
 
     supplier_code = Column(Text, primary_key=True)
     supplier_name = Column(Text, nullable=False)
-    address = Column(Text)
+    address = Column(Text, nullable=True)
 
     # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
     lots = relationship("Lot", back_populates="supplier")
-    purchase_requests = relationship("PurchaseRequest", back_populates="supplier")
     products = relationship("Product", back_populates="supplier")
-
-
-class DeliveryPlace(AuditMixin, Base):
-    """ç´å…¥å…ˆãƒžã‚¹ã‚¿ï¼ˆSAPç´å…¥å…ˆã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚³ãƒ”ãƒ¼ï¼‰"""
-
-    __tablename__ = "delivery_places"
-
-    id = Column(BigInteger, primary_key=True, autoincrement=True)
-    delivery_place_code = Column(String, nullable=False, unique=True, index=True)
-    delivery_place_name = Column(String, nullable=False)
-    address = Column(String, nullable=True)
-    postal_code = Column(String, nullable=True)
-    is_active = Column(Boolean, nullable=False, server_default="true")
-
-    # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
-    products = relationship("Product", back_populates="delivery_place")
-    order_lines = relationship("OrderLine", back_populates="destination")
-    allocations = relationship("Allocation", back_populates="destination")
+    expiry_rules = relationship("ExpiryRule", back_populates="supplier")
 
 
 class Customer(AuditMixin, Base):
@@ -107,12 +90,27 @@ class Customer(AuditMixin, Base):
 
     customer_code = Column(Text, primary_key=True)
     customer_name = Column(Text, nullable=False)
-    address = Column(Text)
+    address = Column(Text, nullable=True)
 
     # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
     orders = relationship("Order", back_populates="customer")
 
 
+class DeliveryPlace(AuditMixin, Base):
+    """ç´å…¥å ´æ‰€ãƒžã‚¹ã‚¿"""
+
+    __tablename__ = "delivery_places"
+
+    id = Column(BigInteger, primary_key=True, autoincrement=True)
+    place_code = Column(String(64), unique=True, nullable=False, index=True)
+    place_name = Column(String(256), nullable=False)
+    address = Column(Text, nullable=True)
+    is_active = Column(Integer, nullable=False, default=1)
+
+    # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
+    allocations = relationship("Allocation", back_populates="destination")
+
+
 class Product(AuditMixin, Base):
     """è£½å“ãƒžã‚¹ã‚¿"""
 
@@ -120,50 +118,41 @@ class Product(AuditMixin, Base):
 
     product_code = Column(Text, primary_key=True)
     product_name = Column(Text, nullable=False)
-    customer_part_no = Column(Text)
-    maker_item_code = Column(String, nullable=True)
-    supplier_item_code = Column(String, nullable=True)
     supplier_code = Column(Text, ForeignKey("suppliers.supplier_code"), nullable=True)
-    packaging_qty = Column(Numeric(10, 2), nullable=False, default=1)  # åŒ…è£…æ•°é‡
-    packaging_unit = Column(String(20), nullable=False, default="EA")  # åŒ…è£…å˜ä½
-    internal_unit = Column(Text, nullable=False, default="EA")  # å†…éƒ¨ç®¡ç†å˜ä½
-    base_unit = Column(String(10), nullable=False, default="EA")  # åŸºæº–å˜ä½
-    assemble_div = Column(Text)
-    next_div = Column(Text)
-    shelf_life_days = Column(Integer)
-    requires_lot_number = Column(Integer, default=1)
+
+    # åŒ…è£…é–¢é€£
+    packaging_qty = Column(Numeric(15, 4), nullable=False, default=1.0)
+    packaging_unit = Column(Text, nullable=False, default="EA")
+    internal_unit = Column(Text, nullable=False, default="EA")
+    base_unit = Column(Text, nullable=False, default="EA")
+
+    # è£½å“æƒ…å ±
+    customer_part_no = Column(Text, nullable=True)
+    maker_item_code = Column(Text, nullable=True)
+    supplier_item_code = Column(Text, nullable=True)
+    packaging = Column(Text, nullable=True)
+    assemble_div = Column(Text, nullable=True)
+    next_div = Column(Text, nullable=True)
+    ji_ku_text = Column(Text, nullable=True)
+    kumitsuke_ku_text = Column(Text, nullable=True)
+    shelf_life_days = Column(Integer, nullable=True)
+    requires_lot_number = Column(Integer, nullable=False, default=1)
+
+    # ç´å…¥å ´æ‰€æƒ…å ±
     delivery_place_id = Column(BigInteger, ForeignKey("delivery_places.id"), nullable=True)
-    ji_ku_text = Column(String, nullable=True)
-    kumitsuke_ku_text = Column(String, nullable=True)
-    delivery_place_name = Column(String, nullable=True)
-    shipping_warehouse_name = Column(String, nullable=True)
+    delivery_place_name = Column(Text, nullable=True)
+    shipping_warehouse_name = Column(Text, nullable=True)
 
     # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
+    supplier = relationship("Supplier", back_populates="products")
     lots = relationship("Lot", back_populates="product")
-    conversions = relationship(
-        "ProductUomConversion", back_populates="product", cascade="all, delete-orphan"
-    )
-    unit_conversions = relationship(
-        "UnitConversion", back_populates="product", cascade="all, delete-orphan"
-    )
+    uom_conversions = relationship("ProductUomConversion", back_populates="product")
+    expiry_rules = relationship("ExpiryRule", back_populates="product")
     order_lines = relationship("OrderLine", back_populates="product")
-    supplier = relationship("Supplier", back_populates="products")
-    delivery_place = relationship("DeliveryPlace", back_populates="products")
-
-    maker_part_no = synonym("maker_item_code")
-
-    __table_args__ = (
-        UniqueConstraint(
-            "supplier_code", "maker_item_code", name="uq_products_supplier_maker_item"
-        ),
-        UniqueConstraint(
-            "supplier_code", "supplier_item_code", name="uq_products_supplier_supplier_item"
-        ),
-    )
 
 
 class ProductUomConversion(AuditMixin, Base):
-    """è£½å“å˜ä½æ›ç®—ãƒ†ãƒ¼ãƒ–ãƒ«"""
+    """è£½å“å˜ä½å¤‰æ›ãƒžã‚¹ã‚¿"""
 
     __tablename__ = "product_uom_conversions"
 
@@ -173,29 +162,26 @@ class ProductUomConversion(AuditMixin, Base):
     source_value = Column(Float, nullable=False, default=1.0)
     internal_unit_value = Column(Float, nullable=False)
 
-    __table_args__ = (UniqueConstraint("product_code", "source_unit", name="uq_product_unit"),)
+    __table_args__ = (
+        UniqueConstraint("product_code", "source_unit", name="uq_product_uom"),
+        {"keep_existing": True},
+    )
 
     # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
-    product = relationship("Product", back_populates="conversions")
+    product = relationship("Product", back_populates="uom_conversions")
 
 
 class UnitConversion(AuditMixin, Base):
-    """
-    å˜ä½æ›ç®—ãƒžã‚¹ã‚¿ï¼ˆæ–°è¦è¿½åŠ ï¼‰
-    è£½å“ã”ã¨ã®å˜ä½æ›ç®—ä¿‚æ•°ã‚’ç®¡ç†
-    """
+    """å˜ä½å¤‰æ›ãƒžã‚¹ã‚¿ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ï¼‰"""
 
     __tablename__ = "unit_conversions"
 
     id = Column(Integer, primary_key=True, autoincrement=True)
-    product_code = Column(Text, ForeignKey("products.product_code"), nullable=False)
-    from_unit = Column(String(10), nullable=False)
-    to_unit = Column(String(10), nullable=False)
-    factor = Column(Float, nullable=False)  # from_unit * factor = to_unit
+    product_id = Column(Text, ForeignKey("products.product_code"), nullable=True)
+    from_unit = Column(Text, nullable=False)
+    to_unit = Column(Text, nullable=False)
+    conversion_factor = Column(Float, nullable=False)
 
     __table_args__ = (
-        UniqueConstraint("product_code", "from_unit", "to_unit", name="uq_unit_conv"),
+        UniqueConstraint("product_id", "from_unit", "to_unit", name="uq_unit_conversion"),
     )
-
-    # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
-    product = relationship("Product", back_populates="unit_conversions")
diff --git forkSrcPrefix/backend/app/models/orders.py forkDstPrefix/backend/app/models/orders.py
index 9823ec100314b3ce7ede8e7244a41c0209db808b..2b7c7d76af7d6d4052e24c01af2bb959649dc169 100644
--- forkSrcPrefix/backend/app/models/orders.py
+++ forkDstPrefix/backend/app/models/orders.py
@@ -29,6 +29,7 @@ from .base_model import AuditMixin, Base
 
 # ðŸ”§ ä¿®æ­£: åž‹ãƒã‚§ãƒƒã‚¯æ™‚ã®ã¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆå¾ªç’°ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’å›žé¿ï¼‰
 if TYPE_CHECKING:
+    from .inventory import Lot, StockMovement
     from .masters import Warehouse
 
 
@@ -66,45 +67,39 @@ class OrderLine(AuditMixin, Base):
     line_no = Column(Integer, nullable=False)
     product_code = Column(Text, ForeignKey("products.product_code"), nullable=False)
     quantity = Column(Float, nullable=False)
-    unit = Column(Text)
-    due_date = Column(Date)
-    next_div = Column(Text)
-    destination_id = Column(BigInteger, ForeignKey("delivery_places.id"), nullable=True)
-
-    # ãƒ•ã‚©ãƒ¼ã‚­ãƒ£ã‚¹ãƒˆé€£æºãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
+    unit = Column(Text, nullable=True)
+    status = Column(Text, default="open")
+    delivery_date = Column(Date, nullable=True)
     forecast_id = Column(Integer, ForeignKey("forecasts.id"), nullable=True)
-    forecast_granularity = Column(Text, nullable=True)
-    forecast_match_status = Column(Text, nullable=True)
-    forecast_qty = Column(Float, nullable=True)
-    forecast_version_no = Column(Integer, nullable=True)
-    forecast_matched_at = Column(DateTime, nullable=True)
-    forecast_version = Column(Integer, nullable=True)
 
-    __table_args__ = (UniqueConstraint("order_id", "line_no", name="uq_order_line"),)
+    __table_args__ = (
+        UniqueConstraint("order_id", "line_no", name="uq_order_line"),
+        Index("ix_order_lines_order_id", "order_id"),
+        Index("ix_order_lines_product_code", "product_code"),
+    )
 
     # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
     order = relationship("Order", back_populates="lines")
     product = relationship("Product", back_populates="order_lines")
-    destination = relationship("DeliveryPlace", back_populates="order_lines")
-    allocations = relationship(
-        "Allocation", back_populates="order_line", cascade="all, delete-orphan"
-    )
-    forecast = relationship("Forecast", back_populates="order_lines")
-    warehouse_allocations: Mapped[list["OrderLineWarehouseAllocation"]] = relationship(
+    allocations = relationship("Allocation", back_populates="order_line", cascade="all, delete-orphan")
+    warehouse_allocations = relationship(
         "OrderLineWarehouseAllocation",
         back_populates="order_line",
         cascade="all, delete-orphan",
     )
+    forecast = relationship("Forecast", back_populates="order_lines")
 
 
 class OrderLineWarehouseAllocation(AuditMixin, Base):
+    """å—æ³¨æ˜Žç´°ã®å€‰åº«åˆ¥é…åˆ†"""
+
     __tablename__ = "order_line_warehouse_allocation"
 
     id: Mapped[int] = mapped_column(Integer, primary_key=True)
     order_line_id: Mapped[int] = mapped_column(ForeignKey("order_lines.id"), nullable=False)
     warehouse_id: Mapped[int] = mapped_column(
         BigInteger,
-        ForeignKey("warehouses.id"),  # â† OK
+        ForeignKey("warehouses.id"),
         nullable=False,
     )
     quantity: Mapped[float] = mapped_column(Float, nullable=False)
@@ -138,41 +133,42 @@ class Allocation(AuditMixin, Base):
     allocated_qty = Column(Float, nullable=False)
     destination_id = Column(BigInteger, ForeignKey("delivery_places.id"), nullable=True)
     allocation_date = Column(DateTime, server_default=func.now())
-    status = Column(Text, default="active")  # active, shipped, cancelled
 
     __table_args__ = (
-        Index("ix_alloc_ol", "order_line_id"),
-        Index("ix_alloc_lot", "lot_id"),
+        Index("ix_allocations_order_line", "order_line_id"),
+        Index("ix_allocations_lot", "lot_id"),
     )
 
     # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
-    order_line = relationship("OrderLine", back_populates="allocations")
-    lot = relationship("Lot", back_populates="allocations")
+    order_line: Mapped["OrderLine"] = relationship("OrderLine", back_populates="allocations")
+    lot: Mapped["Lot"] = relationship("Lot", back_populates="allocations")
     destination = relationship("DeliveryPlace", back_populates="allocations")
 
 
 class Shipping(AuditMixin, Base):
-    """å‡ºè·"""
+    """å‡ºè·å®Ÿç¸¾"""
 
     __tablename__ = "shipping"
 
     id = Column(Integer, primary_key=True, autoincrement=True)
     lot_id = Column(Integer, ForeignKey("lots.id"), nullable=False)
-    order_line_id = Column(Integer, ForeignKey("order_lines.id"))
-    shipped_qty = Column(Float, nullable=False)
-    shipped_date = Column(Date, default=func.current_date())
-    shipping_address = Column(Text)
-    contact_person = Column(Text)
-    contact_phone = Column(Text)
-    delivery_time_slot = Column(Text)
-    tracking_number = Column(Text)
-    carrier = Column(Text)
-    carrier_service = Column(Text)
-    notes = Column(Text)
+    order_line_id = Column(Integer, ForeignKey("order_lines.id"), nullable=True)
+    shipped_quantity = Column(Float, nullable=False)
+    shipping_date = Column(Date, nullable=False)
+    destination_code = Column(Text, nullable=True)
+    destination_name = Column(Text, nullable=True)
+    destination_address = Column(Text, nullable=True)
+    contact_person = Column(Text, nullable=True)
+    contact_phone = Column(Text, nullable=True)
+    delivery_time_slot = Column(Text, nullable=True)
+    tracking_number = Column(Text, nullable=True)
+    carrier = Column(Text, nullable=True)
+    carrier_service = Column(Text, nullable=True)
+    notes = Column(Text, nullable=True)
 
 
 class PurchaseRequest(AuditMixin, Base):
-    """ä»®ç™ºæ³¨ï¼ˆåœ¨åº«ä¸è¶³æ™‚ï¼‰"""
+    """ç™ºæ³¨ä¾é ¼"""
 
     __tablename__ = "purchase_requests"
 
@@ -180,35 +176,20 @@ class PurchaseRequest(AuditMixin, Base):
     product_code = Column(Text, ForeignKey("products.product_code"), nullable=False)
     supplier_code = Column(Text, ForeignKey("suppliers.supplier_code"), nullable=False)
     requested_qty = Column(Float, nullable=False)
-    unit = Column(Text)
-    reason_code = Column(Text, nullable=False)  # stock_out, forecast_shortage, etc.
-    src_order_line_id = Column(Integer, ForeignKey("order_lines.id"))
-    requested_date = Column(Date, server_default=func.current_date())
-    desired_receipt_date = Column(Date)
-    status = Column(Text, default="draft")  # draft, submitted, approved, ordered
-    sap_po_id = Column(Text)
-    notes = Column(Text)
-
-    # ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
-    supplier = relationship("Supplier", back_populates="purchase_requests")
+    requested_date = Column(Date, nullable=False)
+    status = Column(Text, default="pending")
 
 
 class NextDivMap(AuditMixin, Base):
-    """æ¬¡åŒºãƒžãƒƒãƒ”ãƒ³ã‚°ï¼ˆå¾—æ„å…ˆãƒ»ç´å…¥å…ˆãƒ»è£½å“ã”ã¨ã®æ¬¡åŒºè¨­å®šï¼‰ã€‚"""
+    """æ¬¡å·¥ç¨‹åŒºåˆ†ãƒžãƒƒãƒ”ãƒ³ã‚°"""
 
     __tablename__ = "next_div_map"
 
     id = Column(Integer, primary_key=True, autoincrement=True)
-    customer_code = Column(Text, nullable=False)
-    ship_to_code = Column(Text, nullable=False)
-    product_code = Column(Text, nullable=False)
-    next_div = Column(Text, nullable=False)
+    from_customer = Column(Text, nullable=False)
+    from_next_div = Column(Text, nullable=False)
+    target_supplier = Column(Text, nullable=False)
 
     __table_args__ = (
-        UniqueConstraint(
-            "customer_code",
-            "ship_to_code",
-            "product_code",
-            name="uq_next_div_map_customer_ship_to_product",
-        ),
+        UniqueConstraint("from_customer", "from_next_div", name="uq_next_div_map"),
     )
diff --git forkSrcPrefix/backend/pytest.ini forkDstPrefix/backend/pytest.ini
index e6e66bde03359a37d03a798b15571dd0629e2f59..01d82a58e07ea89215d43396c2d862b5c49e7c1b 100644
--- forkSrcPrefix/backend/pytest.ini
+++ forkDstPrefix/backend/pytest.ini
@@ -3,3 +3,6 @@
 testpaths = tests
 python_files = test_*.py
 addopts = -q
+asyncio_mode = auto
+markers =
+    asyncio: mark a test as asyncio-based
\ No newline at end of file
diff --git forkSrcPrefix/backend/requirements.txt forkDstPrefix/backend/requirements.txt
index e1d811b423ea1ae36365c73bec56cdf7008229c1..a7c923e100f57eae6abfebb5ad925687baa4e759 100644
--- forkSrcPrefix/backend/requirements.txt
+++ forkDstPrefix/backend/requirements.txt
@@ -19,3 +19,5 @@ python-dateutil==2.9.0
 psycopg2-binary==2.9.10
 httpx>=0.27
 pytest>=8.4.2
+pytest-asyncio>=0.23
+anyio>=4.0.0
\ No newline at end of file
